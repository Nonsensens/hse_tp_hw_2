name: CI_hse_tp_hw
on:
  push:
    branches: [ "main" ]


jobs:
  first_tg:
    name: first_tg_not
    runs-on: ubuntu-latest
    steps:
    - name: Tg_send_test_new        
      uses: appleboy/telegram-action@master
      with:
        to: ${{ secrets.TELEGRAM_TO }}
        token: ${{ secrets.TELEGRAM_TOKEN }}
        message: |
          Коммит: {{github 
  
  tests_main:
    name: tests_main
    runs-on: ubuntu-latest
    needs: first_tg
    steps:
      - name: Tests_Main
        uses: actions/checkout@v3
      - run: |
          git clone https://github.com/Nonsensens/hse_tp_hw_2.git
          python3 -m unittest tests_main.Tests
      - name: Tg_send_tests_main
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_TO }}
          token: ${{ secrets.TELEGRAM_TOKEN }}
          message: |
            Тесты основные:
            ${{ job.status }}
  
      
 
  test_new:
    name: Tests_Main
    runs-on: ubuntu-latest
    needs: tests_main
    steps:
      - name: Test_New
        uses: actions/checkout@v3
      - run: |
          git clone https://github.com/Nonsensens/hse_tp_hw_2.git
          python3 -m unittest new_test.TestNew
      - name: Tg_send_test_new        
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_TO }}
          token: ${{ secrets.TELEGRAM_TOKEN }}
          message: |
            Новый тест:
            ${{ job.status }}

        


